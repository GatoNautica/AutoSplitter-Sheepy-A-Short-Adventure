# SheepyAutoSplitter

## 概要
SheepyAutoSplitterは、Sheepy A Short Adventureのレース中に予め設定されたチェックポイント（スプリット）で自動的に時間を分割することで、スピードランナーを支援するツールです。これにより、プレイヤーは手動で時間を記録することなくゲームに集中できます。

## 私は誰？
私はGatoNáutica。ビデオゲームとプログラミングに情熱を注ぐ初心者のマルチメディア開発者です。私は自由な時間に新しいアイデアを探求し、楽しんで過ごすことが好きです。

なぜこれを作ったのか？
最初はこの考えはありませんでした。最初のスピードランを試みて、フォーラムを読む前にページにアップロードした後、オートスプリッターのサポートがゲームにはないことに気づきました。手動でスプリットを行う必要があるため、非常に気が散ってしまいました（そして、正直に言うと、それをするのが面倒だったのです）。
そのため、12月8日午前3時9分に寝付けずにこのプロジェクトを開始することにしました。これがその結果です。こういったことをするのは初めてなので、エラーがあるか、改善できる方法があるかもしれません。これらのトピックにあまり詳しくないので、最初はCheat Engineを使おうとしましたが、うまくいきませんでした。何をすべきか正確には分かりませんでした。

## コードの仕組み
`AutoSplitter`はゲームの画面をキャプチャして内容を分析し、チェックポイントに到達したときに自動的に時間を分割します。画像処理技術を使用して黒い画面を検出し、参照画像を確認します。また、特定のエリアや特定のアクションを行う際に誤検出を避けるようにプログラムされています。
走行ルールによると、第6章を終えた後の最初の黒い画面でのみ有効で、クレジットの直前で終了します。したがって、コードは各章間の移行時に黒い画面を分析して、より正確にスプリットを行います。
ゲームのメニューを開くなどの黒いトーンの画面を生成するアクションや、誤検出を引き起こす可能性のあるアクションは完全に管理されています。誤検出を避けるため、望ましくない黒い画面を生成する各アクションが検出されないようにしました。

## コードに実装された機能
**画面キャプチャ**:
コードはOpenCvSharpライブラリを使用してゲームの画面をキャプチャします。`CaptureFullScreen`関数はフルスクリーンのスクリーンショットを撮り、画像行列（Mat）に変換します。

**黒い画面の検出**:
`IsBlackScreen`関数はスクリーンショットをグレースケールに変換し、画像ヒストグラムを計算します。黒いピクセルや暗いトーンの割合が特定の閾値を超えた場合、それは黒い画面と見なされます。

**参照画像の確認**:
`AutoSplitter`は、各章の参照画像（end.png）と現在のスクリーンショットを比較し、`IsMatch`関数を使用して一致レベルを判断します。この関数は両方の画像をグレースケールに変換し、テンプレートマッチングします。

**不要な画像の除外**:
誤検出を避けるため、コードはスクリーンショットが除外画像（noSplit1.png、noSplit2.pngなど）と一致するかどうかも確認します。一致がある場合、その黒い画面は無視されます。

**Autosplitterの実行**:
`StartSplitting`関数はAutosplitterの中心です。画面を連続的にキャプチャし、それが黒い画面かどうかを確認し、参照画像および除外画像との一致を確認します。有効なスプリットが検出されると、時間が記録され、次のチェックポイントに進みます。

**画像の設定**:
参照画像（end.png）および除外画像（noSplit1.png、noSplit2.png）は、Autosplitterが正しく動作するように適切なフォルダーに配置する必要があります。start.pngやmenu.pngなどのユニバーサル画像の検出をサポートするためにも重要です。

## Autosplitterの正しい使用法
**インストール**: `INSTALL.md`ファイルの指示に従って、すべての依存関係をセットアップし、環境を準備します。
**実行**: Visual StudioからAutosplitterを実行します。可能であれば管理者権限で実行します。
**設定**: 特定の走行に合わせて参照画像と除外画像をカスタマイズします。例: `C:\Users\Your User\OneDrive\Desktop\AutoSplitter-Sheepy A Short Adventure`

## README_LANGUAGES.md?
ここには、コードおよびターミナルに表示されるすべてのメッセージが含まれています。スペイン語を話さない人向けです。

## 貢献
貢献は歓迎され、感謝されます！ アイデア、改善、または問題がある場合は、プロジェクトに自由に協力してください。貢献する方法は以下の通りです：
**問題の報告**: バグを見つけたりAutosplitterの使用に問題がある場合は、GitHubでIssueを作成してください。
**改善の提案**: 新しい機能やコードの改善に関するアイデアがある場合は、GitHubでIssueを作成してコミュニティと話し合ってください。
**プルリクエストの提出**: コードに変更や改善を加えた場合は、プルリクエストを提出してください。コードが貢献ガイドラインに準拠していることを確認してください。
**ドキュメント**: READMEファイルやプロジェクトWikiに情報を追加または更新することで、プロジェクトのドキュメントを改善してください。
**翻訳**: プロジェクトやコードメッセージを他の言語に翻訳するのを手伝っていただける場合は、翻訳を含むプルリクエストを提出してください。
**共有とプロモーション**: 他のスピードランナーやビデオゲーム愛好家とプロジェクトを共有してください。より多くの人々がプロジェクトを使用し、貢献するほど、プロジェクトはより良くなります。

## License
This project is licensed under the [Licencia MIT](https://opensource.org/licenses/MIT)